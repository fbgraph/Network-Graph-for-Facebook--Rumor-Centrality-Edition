var functionAlert = new MetroAlert, permissionWarringAlert = new MetroAlert, crossButton = null, buttons = null, permissionWarring = null, TryToStart = function () { FB.getLoginStatus(function (t) { "connected" === t.status ? tryToPassPermission() : FB.login(function (t) { t.authResponse && tryToPassPermission() }, { scope: "user_posts" }) }) }, tryToPassPermission = function () { FB.api("/me/permissions ", "GET", {}, function (t) { "granted" == t.data[0].status && "granted" == t.data[1].status ? popUpAlert() : permissionWarringAlert.popUp() }) }, permissionWarringComfirm = function () { permissionWarringAlert.dismiss(), FB.login(function (t) { t.authResponse && FB.api("/me/permissions ", "GET", {}, function (t) { "granted" == t.data[0].status && "granted" == t.data[1].status && popUpAlert() }) }, { scope: "user_posts", auth_type: "rerequest" }) }, popUpAlert = function () { FB.api("/me", function (t) { functionAlert.popUp(), document.getElementById("FBUserName").innerText = t.name, document.getElementById("loginComfirmName").innerText = t.name }), FB.api("/me/picture", "GET", {}, function (t) { functionAlert.popUp(), document.getElementById("loginComfirmPicture").src = t.data.url }) }, alertDidAppear = function (t, e) { if (t == this.functionAlert) { if (null == crossButton) { crossButton = document.getElementById("crossButton").cloneNode(!0); var n = document.getElementById("crossButton"); n.parentNode.removeChild(n) } if (e.appendChild(crossButton), null == buttons) { buttons = document.getElementById("buttons").cloneNode(!0); var n = document.getElementById("buttons"); n.parentNode.removeChild(n) } e.appendChild(buttons) } if (t == this.permissionWarringAlert) { if (null == permissionWarring) { permissionWarring = document.getElementById("permissionWarring").cloneNode(!0); var n = document.getElementById("permissionWarring"); n.parentNode.removeChild(n) } e.appendChild(permissionWarring) } };